quick_code_review:
  description: >
    Perform a fast code quality check on the diff.

    INPUTS AVAILABLE: - Workspace diff from diff.txt (cached by router) - CI
    summary from ci_summary.json (what already failed) - Workspace commits from
    commits.json (commit context)

    YOUR TASKS: 1. Use WorkspaceTool to read diff.txt

    2. Use WorkspaceTool to read ci_summary.json for context

    3. Use WorkspaceTool to read commits.json for context

    4. Scan for common code smells:
       - Long functions (>50 lines)
       - Deep nesting (>3 levels)
       - Magic numbers (hardcoded constants)
       - Duplicate code patterns
       - TODO/FIXME comments
       - Poor variable naming
       - Missing error handling
       - Console.log/print statements

    5. Identify potential bugs:
       - Off-by-one errors
       - Null/undefined checks
       - Resource leaks (unclosed files/connections)
       - Race conditions (async/await issues)

    6. Check for best practices:
       - DRY (Don't Repeat Yourself)
       - Single Responsibility Principle
       - Proper error propagation
       - Consistent code style

    7. **RETURN JSON OUTPUT**: Your output will be automatically saved to quick_review.json.
       Return this exact structure:
       {
         "critical": [
           {
             "title": "Issue title",
             "file": "path/to/file.js",
             "line": "45",
             "description": "Detailed description",
             "fix_suggestion": "How to fix it",
             "severity": "high"
           }
         ],
         "warnings": [
           {
             "title": "Warning title",
             "file": "path/to/file.js",
             "line": "20",
             "description": "What's wrong",
             "fix_suggestion": "How to improve",
             "severity": "medium"
           }
         ],
         "info": [
           {
             "title": "Suggestion title",
             "file": "path/to/file.js",
             "line": "10",
             "description": "Best practice suggestion",
             "fix_suggestion": "How to implement",
             "severity": "info"
           }
         ],
         "summary": "Overall summary of findings"
       }

    IMPORTANT: - Focus on NEW code (lines with + in diff) - Skip CI errors
    already in ci_summary.json - Be constructive and specific - Suggest fixes,
    not just problems - Prioritize high-impact issues

    CATEGORIZATION: - Critical: Potential bugs, security issues, broken
    functionality - Warning: Code smells, maintainability issues, style
    violations - Info: Suggestions for improvement, best practices

  expected_output: >
    Complete code review in JSON format with: - Critical issues (potential bugs,
    security) - Warnings (code smells, maintainability) - Info (suggestions,
    best practices) - Overall summary with key findings - All issues with
    specific file, line, and fix suggestions

  output_json: quick_review.json
