quick_code_review:
  description: >
    Perform fast code quality review and write findings to quick_review.json.

    **MANDATORY STEPS (complete ALL steps)**:

    1. **Read and analyze code** - Call WorkspaceTool to read diff.txt and
    analyze changes 2. **Write output file** - Call WorkspaceTool to write
    quick_review.json

    **STEP 1: Read and Analyze**

    Call WorkspaceTool to read diff.txt and analyze each changed file for:

    **Code Quality Issues**: - Overly complex logic (nested loops, long methods)
    - Magic numbers/strings without constants - Duplicate code patterns -
    Missing error handling - Poor naming conventions

    **Best Practices Violations**: - Missing documentation for public APIs -
    Hardcoded credentials or secrets - Console.log/print statements left in code
    - TODO/FIXME comments without tracking - Missing input validation

    **Performance Red Flags**: - N+1 query patterns - Unnecessary loops or
    iterations - Missing database indexes - Inefficient data structures

    **Security Concerns**: - SQL injection vulnerabilities - Unvalidated user
    input - Exposed sensitive data - Missing authentication checks

    **Categorize findings by severity**: - ðŸ”´ **CRITICAL**: Security
    vulnerabilities, data loss risks, breaking changes - ðŸŸ¡ **WARNING**: Code
    quality issues, missing docs, potential bugs - ðŸ”µ **INFO**: Style
    suggestions, minor improvements, best practices

    **STEP 2: Write Output File (CRITICAL)**

    Call WorkspaceTool to write quick_review.json with this structure: ```json {
      "status": "warning",
      "passed": false,
      "summary": "Found 2 critical issues and 5 warnings",
      "critical": [
        {
          "title": "SQL Injection Vulnerability",
          "file": "api/users.py",
          "line": "45",
          "description": "User input concatenated directly into SQL query",
          "fix_suggestion": "Use parameterized queries or ORM"
        }
      ],
      "warnings": [],
      "info": [],
      "files_reviewed": 5,
      "total_findings": 8
    } ```

    **If no issues found**, write: ```json {
      "status": "success",
      "passed": true,
      "summary": "No issues found",
      "critical": [],
      "warnings": [],
      "info": [],
      "files_reviewed": 5,
      "total_findings": 0
    } ```

    **OUTPUT FORMAT REQUIREMENTS**: - status: "success", "warning", or
    "critical" - passed: boolean - summary: Brief text summary - critical: Array
    (may be empty) - warnings: Array (may be empty) - info: Array (may be empty)
    - files_reviewed: Number - total_findings: Number

    **Each finding must have**: - title: Short title - file: File path - line:
    Line number (string) - description: What's wrong - fix_suggestion: How to
    fix it

    **VALIDATION CHECKLIST**: - [ ] Did you call WorkspaceTool to read diff.txt?
    - [ ] Did you analyze code changes? - [ ] Did you call WorkspaceTool with
    operation="write"? - [ ] Did you set filename="quick_review.json"? - [ ]
    Does content include all required fields? - [ ] Are arrays (critical,
    warnings, info) present even if empty?

    **IMPORTANT**: - Focus on NEW/CHANGED code only (lines starting with `+` in
    diff) - Ignore formatting/style if CI handles it - Provide specific line
    numbers from the diff - Every finding MUST have a concrete fix suggestion -
    Be concise - this is a "quick" review - **YOU MUST WRITE THE FILE - do not
    just return JSON as text**

  expected_output: >
    Confirmation message stating: "Successfully wrote quick_review.json to
    workspace."

    The file MUST exist in workspace with: - JSON object with all required
    fields - Categorized findings (critical/warning/info) - File paths and line
    numbers for each finding - Issue descriptions and fix suggestions
