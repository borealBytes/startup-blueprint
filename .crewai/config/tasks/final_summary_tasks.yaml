synthesize_summary:
  description: >
    Synthesize all review outputs into a final GitHub-flavored markdown summary.

    **YOUR MISSION**: Create a comprehensive summary by reading workspace JSON
    files and extracting their key findings.

    **STEP-BY-STEP WORKFLOW**:

    1. **Read CI Summary** (REQUIRED):
       - Use WorkspaceTool: `operation="read", filename="ci_summary.json"`
       - Extract: `status`, `passed`, `summary`, `criticalErrors` (if any)
       - Include: CI status, error count, summary message

    2. **Read Quick Review**:
       - Use WorkspaceTool: `operation="read", filename="quick_review.json"`
       - Extract: `status`, `summary`, key findings
       - Include: Overall assessment, main concerns

    3. **Read Full Review** (if available):
       - Use WorkspaceTool: `operation="read", filename="full_review.json"`
       - Extract: `architecture`, `security`, `performance` findings
       - Include: Critical/high severity items only (top 3-5)

    4. **Read Router Decision**:
       - Use WorkspaceTool: `operation="read", filename="router_decision.json"`
       - Extract: `suggestions` array
       - Include: Any router suggestions for improvements

    5. **Synthesize into markdown**:
       - Write using WorkspaceTool: `operation="write",
    filename="final_summary.md"`

    **CRITICAL REQUIREMENTS**: - DO NOT just write headers - INCLUDE ACTUAL
    CONTENT from each JSON file - If a file doesn't exist, write "Did not run" -
    don't skip the section - Extract specific error messages, suggestions, and
    findings - Keep total output under 50 lines but make every line count - DO
    NOT wrap output in ```markdown code blocks

    **EXAMPLE OUTPUT FORMAT**:

    ## âš ï¸ Review Summary

    Review completed for PR #{pr_number} - {count} workflows executed.

    **Commit**: `{commit_sha}` **Repository**: {repository} **Timestamp**:
    {timestamp}

    ---

    ### âœ… CI Analysis

    **Status**: failure **Summary**: Core CI job failed - 1 critical error
    detected

    **Critical Errors**: - Type: CI Failure (exit code 1) - Message: Build
    failed in 30 files commit (3221 additions, 582 deletions) - Fix: Review
    GitHub Actions logs for specific TypeScript/Python errors

    ---

    ### âš¡ Quick Review

    **Status**: [extract from quick_review.json] **Key Findings**: [extract top
    2-3 findings from summary field]

    ---

    ### ðŸ” Full Review

    **Status**: [if full_review.json exists, extract summary, else "Did not
    run"] **Critical Issues**: [extract top 3 critical/high severity items if
    available]

    ---

    ### ðŸ’¡ Router Suggestions

    [Include suggestions array from router_decision.json if present]

    ---

    *ðŸ¤– Generated by CrewAI Router System*

    **VALIDATION CHECKLIST** (verify before writing): âœ“ CI Analysis section has
    actual status and error details (not just "Status: unknown") âœ“ Quick Review
    section has extracted findings (not just "Did not run") âœ“ Full Review
    section has content if full_review.json exists âœ“ No placeholder text like
    "unknown" or "N/A" without explanation âœ“ Total length is 30-50 lines with
    actual content

  expected_output: >
    Comprehensive GitHub-flavored markdown summary (30-50 lines) saved to
    final_summary.md with ACTUAL extracted content from each workflow's JSON
    output. Must include specific error messages, findings, and suggestions -
    not just section headers.

  output_file: final_summary.md
