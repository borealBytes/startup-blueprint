synthesize_summary:
  description: >
    EXECUTE these 2 steps. DO NOT stop early. DO NOT describe what you will do -
    DO IT.


    STEP 1: Read all review outputs

    Read each file (if exists, skip if missing): -
    WorkspaceTool(operation="read", filename="ci_summary.json", content="") â†’
    extract status, summary, critical_errors, warnings, checks_performed -
    WorkspaceTool(operation="read", filename="quick_review.json", content="") â†’
    extract critical, warnings, info arrays with ALL items -
    WorkspaceTool(operation="read", filename="full_review.json", content="") â†’
    optional, extract high-severity findings - WorkspaceTool(operation="read",
    filename="router_decision.json", content="") â†’ extract suggestions


    STEP 2: Write final_summary.md with ALL findings

    Use WorkspaceTool(operation="write", filename="final_summary.md",
    content=<markdown>)

    Required markdown structure:

    ## âš ï¸ Review Summary Review completed for PR #{pr_number} Commit: {sha} |
    Repository: {repository} | Workflows: {list} | Timestamp: {time}

    ---

    ### âœ… CI Analysis Status: (use âœ… if passed, âŒ if failed) {status} Summary:
    {text from ci_summary.json}

    <details> <summary><b>ğŸ” View CI Issues</b></summary>

    **Critical Errors**: - List EACH error from critical_errors array with file,
    line, message, fix

    **Warnings**: - List EACH warning from warnings array

    </details>

    ---

    ### âš¡ Quick Review Status: {status from quick_review.json} Summary:
    {summary text} Findings: {N} critical, {M} warnings, {K} suggestions

    <details open> <summary><b>ğŸ”´ Critical Issues ({count})</b></summary>

    Iterate through critical array: - ğŸ”´ **{title}** `{file}:{line}`
      - {description}
      - ğŸ’¡ **Fix**: {fix_suggestion}

    </details>

    <details> <summary><b>ğŸŸ¡ Warnings ({count})</b></summary>

    Iterate through warnings array: - ğŸŸ¡ **{title}** `{file}:{line}`
      - {description}
      - ğŸ’¡ **Fix**: {fix_suggestion}

    </details>

    <details> <summary><b>ğŸ”µ Suggestions ({count})</b></summary>

    Iterate through info array: - ğŸ”µ **{title}** `{file}:{line}`
      - {description}
      - ğŸ’¡ **Fix**: {fix_suggestion}

    </details>

    ---

    ### ğŸ” Full Technical Review Status: {Completed or Did not run}

    (If ran, show critical findings)

    ---

    ### ğŸ’¡ Router Suggestions - List suggestions from router_decision.json

    ---

    *ğŸ¤– Generated by CrewAI Router System | â±ï¸ {time}*


    CRITICAL CONSTRAINTS: - BOTH steps MUST complete - DO NOT return "I will..."
    - EXECUTE the actions  
    - You MUST iterate through EVERY item in critical/warnings/info arrays -
    Show ALL findings, not counts - this is NOT a summary - The task is NOT
    complete until final_summary.md exists - Minimum 1000 characters (if
    shorter, you skipped findings) - Use actual data from JSON files, not
    placeholders

  expected_output: >
    "Successfully wrote final_summary.md with N critical issues, M warnings, K
    suggestions."

    File MUST exist with comprehensive markdown showing ALL findings.
